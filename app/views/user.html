<div class="row">
  <div class="col-md-2" ng-include="'views/_navstacked.html'"></div>

  <div class="col-md-10 marksheet" ng-controller="UserCtrl">
  <h3>{{data.user.fullname}}</h3>
  <div class="row">
  	<div class="col-md-7" 
  		style="border-right:solid 1px #ddd;"
        ng-include="'extensions/Staffing/_staffprofile.html'">
  	</div>
  	<div class="col-md-5">
		<h3>{{dict.change_password}}</h3>
  	  <br>
  	  <form class="form-horizontal" role="form" ng-submit="savePassword()">
			  <div class="form-group" ng-if="data.user.username !== currentUser.username">
			    <label for="repeatpassword" class="col-sm-3 control-label">{{dict.your_password}}</label>
			    <div class="col-sm-9">
			      <input id="repeatpassword"
			           class="form-control"
			           type="password"
			           placeholder="{{dict.your_password}}" 
			           ng-model="data.currentPassword">
			    </div>
			  </div>
			  <div class="form-group" ng-if="data.user.username === currentUser.username">
			    <label for="repeatpassword" class="col-sm-3 control-label">{{dict.current_password}}</label>
			    <div class="col-sm-9">
			      <input id="repeatpassword"
			           class="form-control"
			           type="password"
			           placeholder="{{dict.current_password}}" 
			           ng-model="data.currentPassword">
			    </div>
			  </div>
			  <br>
			  <div class="form-group {{data.newPassword.length > 5 ? 'has-success' : ''}}">
			    <label for="userFullname" class="col-sm-3 control-label">{{dict.new_password}}</label>
			    <div class="col-sm-9">
			      <input id="userFullname"
			           class="form-control" 
			           type="password"
			           placeholder="{{dict.new_password}}"
			           ng-model="data.newPassword">
			    </div>
			  </div>
			  <div class="form-group {{data.verifiedStatus}}">
			    <label for="verifypassword" class="col-sm-3 control-label">{{dict.type_it_again}}</label>
			    <div class="col-sm-9">
			      <input id="verifypassword"
			           class="form-control"
			           type="password"
			           placeholder="{{dict.new_password}}" 
			           ng-model="data.repeatPassword"
			           ng-change="verifyStatus()"
			           ng-blur="verifyMatch()">
			    </div>
			  </div>
			  <div class="form-group">
			    <label for="submit" class="col-sm-3 control-label"></label>
			    <div class="col-sm-9">
			  		<div ng-if="status === 401" style="color:red;">{{dict.incorrect_password}}</div>
			  		<br>
			      <button type="submit" 
			              class="btn btn-default 
			                     {{data.newPassword.length < 6 ||
			                       data.repeatPassword.length < data.newPassword.length ||
			                       data.verifiedStatus === 'has-error' ? 'disabled' : ''}}"
			              ng-if="status !== 200">{{dict.submit}}</button>
			      <button type="submit" 
			              class="btn btn-success disabled"
			              ng-if="status === 200">{{dict.saved}}</button>
			    </div>
			  </div>
    		
			</form>
  	</div>
  </div>
  </div>
	
</div>	

